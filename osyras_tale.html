<!-- osyras_tale.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Coffee Byte Dev</title>
  <meta charset="utf-8" />
  <link rel="shortcut icon" href="favicon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="assets/css/styles.css" />

  <!-- Meta Tags -->
  <meta name="description" content="Read Osyra's Tale - a sci-fi fantasy novel about chimera experiments and survival" />
  <meta name="keywords" content="osyra42, Coffee Byte Dev, Osyra's Tale, novel, sci-fi, fantasy, chimera" />
  <meta name="author" content="osyra42" />
  <meta property="og:title" content="Osyra's Tale - Coffee Byte Dev" />
  <meta property="og:description" content="Read Osyra's Tale - a sci-fi fantasy novel about chimera experiments and survival" />
  <meta property="og:image" content="https://coffeebyte.dev/favicon.png" />
  <meta property="og:url" content="https://coffeebyte.dev" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Osyra's Tale - Coffee Byte Dev" />
  <meta name="twitter:description" content="Read Osyra's Tale - a sci-fi fantasy novel about chimera experiments and survival" />
  <meta name="twitter:image" content="https://coffeebyte.dev/favicon.png" />

  <script src="assets/js/sidebar.js" defer></script>
  <script src="assets/js/scripts.js" defer></script>
  <script src="assets/js/mobile.js" defer></script>
  <script src="assets/js/md2html.js" defer></script>

  <script>
    image = "osyras_tale.jpg";
    title = "Osyra's Tale";
  </script>

  <style>
    .chapter-link {
      cursor: pointer;
      color: var(--caramel);
    }
    .chapter-link:hover {
      color: var(--pumpkin-spice);
      text-decoration: underline;
    }
    .chapter-link.active {
      color: var(--pumpkin-spice);
      font-weight: bold;
    }
    #content-viewer {
      background: var(--dark-mocha);
      padding: 1rem;
      border-radius: 8px;
      min-height: 200px;
      max-height: 60vh;
      overflow-y: auto;
    }
    #content-viewer p {
      margin: 0.5rem 0;
      line-height: 1.6;
    }
    #content-viewer h1, #content-viewer h2, #content-viewer h3 {
      color: var(--pumpkin-spice);
    }
    .loading {
      color: var(--half-and-half);
      font-style: italic;
    }
  </style>

</head>
<body>

  <sidebar>
    <!-- Placeholder for dynamic sidebar content -->
  </sidebar>
  <!-- Main Content -->
  <main class="archive">

    <div class="download-bar">
      <h1>Osyra's Tale</h1>
      <button class="download-btn" onclick="window.print()">Save as PDF</button>
    </div>

    <h1 id="viewer-title">Content Viewer</h1>
    <div id="content-viewer">
      <p class="loading">Loading...</p>
    </div>

    <h1>Osyra's Tale - Revision 01 (2025)</h1>
    <pre>
00 - <span class="chapter-link" data-file="osyras_tale/README.md">About Osyra's Tale</span>
01 - <span class="chapter-link" data-file="osyras_tale/revision_01/01_interview.md">Chapter 01 - Interview</span>
02 - <span class="chapter-link" data-file="osyras_tale/revision_01/02_processing.md">Chapter 02 - Processing</span>
<s>03 Chapter 03 - </s>
    </pre>

    <h1>Osyra's Tale - Revision 00 (2024)</h1>
    <pre>
[000A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 0/001.md">Part 0 - Random Things</span>
  [001A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 0/001.md">Chapter -1 - Back Alley</span>
[100A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/100.md">Part 1 - Chimera Project</span>
  [101A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/101.md">Chapter 01 - A Declaration of Self</span>
  [102B] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/102.md">Chapter 02 - The Gilded Cage</span> <span class="new">.</span>
  [103A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/103.md">Chapter 03 - Burnt Toast and Solder</span>
  [104A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/104.md">Chapter 04 - The Awakening</span>
  [105A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/105.md">Chapter 05 - The Second Tragedy</span>
  [106A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/106.md">Chapter 06 - A Promise</span>
  [107B] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/107.md">Chapter 07 - Who is impressed?</span> <span class="new">.</span>
  [108A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/108.md">Chapter 08 - Somehow Good News</span>
  [109A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/109.md">Chapter 09 - A Big Surprise</span>
  [110A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/110.md">Chapter 10 - Child Happiness</span>
  [111A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/111.md">Chapter 11 - First Handshake</span>
  [112A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/112.md">Chapter 12 - It's Mitosis</span>
  [113A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/113.md">Chapter 13 - Cool Sunglasses</span>
  [114A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/114.md">Chapter 14 - A New Opportunity</span>
  [115A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/115.md">Chapter 15 - The Warehouse</span>
  [116A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/116.md">Chapter 16 - New Turbines</span>
  [117A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/117.md">Chapter 17 - The Mighty Pen</span>
  [118A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/118.md">Chapter 18 - Ship Shape</span>
  [119A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/119.md">Chapter 19 - Happy Lab</span>
  [120A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/120.md">Chapter 20 - Well Technically</span>
  [121A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/121.md">Chapter 21 - Clinical Trials</span>
  [122A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/122.md">Chapter 22 - The First Chimeran</span>
  [123A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/123.md">Chapter 23 - Successful Mutation</span>
  [124A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/124.md">Chapter 24 - Reassignment</span>
  [125A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/125.md">Chapter 25 - Morbid Fixation</span>
  [126A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/126.md">Chapter 26 - It Burns Anything</span>
  [127A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/127.md">Chapter 27 - Pudding Brain</span>
  [128A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/128.md">Chapter 28 - Mercenary</span>
  [129A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/129.md">Chapter 29 - Boot Camp</span>
  [130A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/130.md">Chapter 30 - Chimera One</span>
  [131A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/131.md">Chapter 31 - The Unchained</span>
  [132A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 1/132.md">Chapter 32 - </span>
[200A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 2/200.md">Part 2 - A True Predator</span>
  [233A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 2/233.md">Chapter 33 - </span>
  [234A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 2/234.md">Chapter 34 - </span>
  [235A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 2/235.md">Chapter 35 - </span>
  [236A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 2/236.md">Chapter 36 - </span>
  [237A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 2/237.md">Chapter 37 - </span>
  [238A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 2/238.md">Chapter 38 - </span>
  [239A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 2/239.md">Chapter 39 - </span>
  [240A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 2/240.md">Chapter 40 - </span>
[300A] <span class="chapter-link" data-file="osyras_tale/revision_00/Part 3/300.md">Part 3 - Search and Rescue</span>
<s>[400A] Part 4 - </s>
    </pre>

  </main>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const viewer = document.getElementById('content-viewer');
    const viewerTitle = document.getElementById('viewer-title');
    const links = document.querySelectorAll('.chapter-link');

    function loadContent(filePath) {
        viewer.innerHTML = '<p class="loading">Loading...</p>';
        viewerTitle.textContent = 'Loading...';

        // Add cache-busting timestamp to force refresh
        const cacheBuster = '?t=' + Date.now();

        fetch(filePath + cacheBuster)
            .then(response => {
                if (!response.ok) throw new Error('Failed to load file');
                return response.text();
            })
            .then(text => {
                // Get the first non-empty line as the title and find where content starts
                const lines = text.split('\n');
                let firstLine = '';
                let contentStartIndex = 0;

                for (let i = 0; i < lines.length; i++) {
                    const trimmed = lines[i].trim();
                    if (trimmed) {
                        // Remove markdown heading markers if present
                        firstLine = trimmed.replace(/^#+\s*/, '');
                        contentStartIndex = i + 1;
                        break;
                    }
                }
                viewerTitle.textContent = firstLine || 'Content Viewer';

                // Remove the first line (title) from content
                const contentText = lines.slice(contentStartIndex).join('\n').trim();

                // Render markdown content
                viewer.innerHTML = Md2Html.md2html(contentText);
                viewer.scrollTop = 0;
            })
            .catch(error => {
                viewerTitle.textContent = 'Error';
                viewer.innerHTML = `<p style="color: var(--caramel);">Error loading content: ${error.message}</p>`;
            });
    }

    // Add click handlers to all chapter links
    links.forEach(link => {
        link.addEventListener('click', function() {
            // Remove active class from all links
            links.forEach(l => l.classList.remove('active'));
            // Add active class to clicked link
            this.classList.add('active');
            // Load the content
            loadContent(this.dataset.file);
        });
    });

    // Load README by default
    loadContent('osyras_tale/README.md');
    // Mark the About link as active
    document.querySelector('.chapter-link[data-file="osyras_tale/README.md"]').classList.add('active');
});
</script>

</body>
</html>
