<!-- osyras_tale.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Coffee Byte Dev</title>
  <meta charset="utf-8" />
  <link rel="shortcut icon" href="favicon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="assets/css/styles.css" />

  <!-- Meta Tags -->
  <meta name="description" content="Read Osyra's Tale - a sci-fi fantasy novel about chimera experiments and survival" />
  <meta name="keywords" content="osyra42, Coffee Byte Dev, Osyra's Tale, novel, sci-fi, fantasy, chimera" />
  <meta name="author" content="osyra42" />
  <meta property="og:title" content="Osyra's Tale - Coffee Byte Dev" />
  <meta property="og:description" content="Read Osyra's Tale - a sci-fi fantasy novel about chimera experiments and survival" />
  <meta property="og:image" content="https://coffeebyte.dev/favicon.png" />
  <meta property="og:url" content="https://coffeebyte.dev" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Osyra's Tale - Coffee Byte Dev" />
  <meta name="twitter:description" content="Read Osyra's Tale - a sci-fi fantasy novel about chimera experiments and survival" />
  <meta name="twitter:image" content="https://coffeebyte.dev/favicon.png" />

  <script src="assets/js/sidebar.js" defer></script>
  <script src="assets/js/scripts.js" defer></script>
  <script src="assets/js/mobile.js" defer></script>
  <script src="assets/js/md2html.js" defer></script>
  <script src="assets/js/back-to-top.js" defer></script>

  <script>
    image = "osyras_tale.jpg";
    title = "Osyra's Tale";
  </script>

  <style>
    main.archive .chapter-link {
      cursor: pointer;
      color: var(--caramel);
    }
    main.archive .chapter-link:hover {
      color: var(--pumpkin-spice);
      text-decoration: underline;
    }
    main.archive .chapter-link.active {
      color: var(--pumpkin-spice);
      font-weight: bold;
    }
    .chapter-content {
      display: block;
      white-space: normal;
      font-family: Arial, sans-serif;
      background: var(--dark-mocha);
      padding: 1rem;
      margin: 0.5rem 0;
      border-radius: 8px;
      border-left: 3px solid var(--pumpkin-spice);
    }
    .chapter-content p {
      margin: 0.5rem 0;
      line-height: 1.6;
    }
    .chapter-content h1, .chapter-content h2, .chapter-content h3 {
      color: var(--pumpkin-spice);
    }
    @media print {
      .chapter-content {
        background: white;
        color: black;
        border-left-color: #333;
      }
      .chapter-content h1, .chapter-content h2, .chapter-content h3 {
        color: black;
      }
    }
    .loading {
      color: var(--half-and-half);
      font-style: italic;
    }
  </style>

</head>
<body>

  <sidebar>
    <!-- Placeholder for dynamic sidebar content -->
  </sidebar>
  <!-- Main Content -->
  <main class="archive">

    <div class="download-bar">
      <h1>Osyra's Tale</h1>
      <button class="download-btn" onclick="window.print()">Save as PDF</button>
    </div>

    <div id="chapter-list"></div>

    <button id="back-to-top">Back to Top</button>

  </main>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const md = `
# Osyra's Tale - Revision 01 (2025)
00 - [About Osyra's Tale](osyras_tale/README.md)
01 - [Chapter 01 - Interview](osyras_tale/revision_01/01_interview.md)
02 - [Chapter 02 - Processing](osyras_tale/revision_01/02_processing.md)
~~03 - Chapter 03~~

---

# Osyra's Tale - Revision 00 (2024)

### 000A - [Part 0 - Random Things](osyras_tale/revision_00/Part 0/001.md)
001A - [Chapter -1 - Back Alley](osyras_tale/revision_00/Part 0/001.md)

### 100A - [Part 1 - Chimera Project](osyras_tale/revision_00/Part 1/100.md)
101A - [Chapter 01 - A Declaration of Self](osyras_tale/revision_00/Part 1/101.md)
102B - [Chapter 02 - The Gilded Cage](osyras_tale/revision_00/Part 1/102.md)
103A - [Chapter 03 - Burnt Toast and Solder](osyras_tale/revision_00/Part 1/103.md)
104A - [Chapter 04 - The Awakening](osyras_tale/revision_00/Part 1/104.md)
105A - [Chapter 05 - The Second Tragedy](osyras_tale/revision_00/Part 1/105.md)
106A - [Chapter 06 - A Promise](osyras_tale/revision_00/Part 1/106.md)
107B - [Chapter 07 - Who is impressed?](osyras_tale/revision_00/Part 1/107.md)
108A - [Chapter 08 - Somehow Good News](osyras_tale/revision_00/Part 1/108.md)
109A - [Chapter 09 - A Big Surprise](osyras_tale/revision_00/Part 1/109.md)
110A - [Chapter 10 - Child Happiness](osyras_tale/revision_00/Part 1/110.md)
111A - [Chapter 11 - First Handshake](osyras_tale/revision_00/Part 1/111.md)
112A - [Chapter 12 - It's Mitosis](osyras_tale/revision_00/Part 1/112.md)
113A - [Chapter 13 - Cool Sunglasses](osyras_tale/revision_00/Part 1/113.md)
114A - [Chapter 14 - A New Opportunity](osyras_tale/revision_00/Part 1/114.md)
115A - [Chapter 15 - The Warehouse](osyras_tale/revision_00/Part 1/115.md)
116A - [Chapter 16 - New Turbines](osyras_tale/revision_00/Part 1/116.md)
117A - [Chapter 17 - The Mighty Pen](osyras_tale/revision_00/Part 1/117.md)
118A - [Chapter 18 - Ship Shape](osyras_tale/revision_00/Part 1/118.md)
119A - [Chapter 19 - Happy Lab](osyras_tale/revision_00/Part 1/119.md)
120A - [Chapter 20 - Well Technically](osyras_tale/revision_00/Part 1/120.md)
121A - [Chapter 21 - Clinical Trials](osyras_tale/revision_00/Part 1/121.md)
122A - [Chapter 22 - The First Chimeran](osyras_tale/revision_00/Part 1/122.md)
123A - [Chapter 23 - Successful Mutation](osyras_tale/revision_00/Part 1/123.md)
124A - [Chapter 24 - Reassignment](osyras_tale/revision_00/Part 1/124.md)
125A - [Chapter 25 - Morbid Fixation](osyras_tale/revision_00/Part 1/125.md)
126A - [Chapter 26 - It Burns Anything](osyras_tale/revision_00/Part 1/126.md)
127A - [Chapter 27 - Pudding Brain](osyras_tale/revision_00/Part 1/127.md)
128A - [Chapter 28 - Mercenary](osyras_tale/revision_00/Part 1/128.md)
129A - [Chapter 29 - Boot Camp](osyras_tale/revision_00/Part 1/129.md)
130A - [Chapter 30 - Chimera One](osyras_tale/revision_00/Part 1/130.md)
131A - [Chapter 31 - The Unchained](osyras_tale/revision_00/Part 1/131.md)
132A - [Chapter 32](osyras_tale/revision_00/Part 1/132.md)

### 200A - [Part 2 - A True Predator](osyras_tale/revision_00/Part 2/200.md)
233A - [Chapter 33](osyras_tale/revision_00/Part 2/233.md)
234A - [Chapter 34](osyras_tale/revision_00/Part 2/234.md)
235A - [Chapter 35](osyras_tale/revision_00/Part 2/235.md)
236A - [Chapter 36](osyras_tale/revision_00/Part 2/236.md)
237A - [Chapter 37](osyras_tale/revision_00/Part 2/237.md)
238A - [Chapter 38](osyras_tale/revision_00/Part 2/238.md)
239A - [Chapter 39](osyras_tale/revision_00/Part 2/239.md)
240A - [Chapter 40](osyras_tale/revision_00/Part 2/240.md)

### 300A - [Part 3 - Search and Rescue](osyras_tale/revision_00/Part 3/300.md)

~~400A - Part 4~~
`;

    const container = document.getElementById('chapter-list');
    container.innerHTML = Md2Html.md2html(md);

    // Intercept clicks on .md links for inline chapter viewing
    container.querySelectorAll('a[href$=".md"]').forEach(link => {
        link.classList.add('chapter-link');
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const parent = this.closest('p, h1, h2, h3, h4, h5, h6');
            if (!parent) return;
            const existing = parent.nextElementSibling;

            // If already open, toggle it closed
            if (existing && existing.classList.contains('chapter-content')) {
                existing.remove();
                this.classList.remove('active');
                return;
            }

            // Create content div after the parent element
            const contentDiv = document.createElement('div');
            contentDiv.className = 'chapter-content';
            contentDiv.innerHTML = '<p class="loading">Loading...</p>';
            parent.insertAdjacentElement('afterend', contentDiv);
            this.classList.add('active');

            fetch(this.href + '?t=' + Date.now())
                .then(response => {
                    if (!response.ok) throw new Error('Failed to load file');
                    return response.text();
                })
                .then(text => {
                    contentDiv.innerHTML = Md2Html.md2html(text);
                })
                .catch(error => {
                    contentDiv.innerHTML = '<p style="color: var(--caramel);">Error: ' + error.message + '</p>';
                });
        });
    });
});
</script>

</body>
</html>
